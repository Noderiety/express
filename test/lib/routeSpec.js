"use strict";
require('traceur-source-maps').install(require('traceur'));
var superagent = require('supertest'),
    _ = require('lodash'),
    app = require('../../index');
require('chai').should();
function request() {
  return superagent(app.server);
}
describe('Routes', (function() {
  describe('GET /', (function() {
    it('should return 200', (function(done) {
      request().get('/').expect(200, done);
    }));
  }));
  describe('GET /thread', (function() {
    it('should return 200', (function(done) {
      request().get('/thread').expect('Content-Type', /json/).expect((function(res) {
        res.body.should.be.an('array');
        var thread = res.body[0];
        thread.should.have.property('title');
        thread.should.have.property('author');
        thread.should.have.property('title');
      })).expect(200, done);
    }));
  }));
  describe('GET /thread/:title', (function() {
    it('should return 200', (function(done) {
      request().get('/thread/Hello').expect('Content-Type', /json/).expect((function(res) {
        var thread = res.body;
        thread.thread.should.have.property('title');
        thread.thread.should.have.property('author');
        thread.thread.should.have.property('title');
        _.each(thread.posts, (function(post) {
          post.thread.should.eql(thread.thread._id);
          post.should.have.property('post');
          post.should.have.property('author');
          post.should.have.property('date');
        }));
      })).expect(200, done);
    }));
  }));
}));

//# sourceMappingURL=data:application/json;base64,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SyxTQUFTLEFBQUMsQ0FBQyxRQUFPLENBQUMsQ0FBQztBQUNuQyxhQUFHLE9BQU8sS0FBSyxTQUFTLEFBQUMsQ0FBQyxNQUFLLENBQUMsQ0FBQztRQUNuQyxFQUFDLENBQUM7TUFFSixFQUFDLE9BQ0ssQUFBQyxDQUFDLEdBQUUsQ0FBRyxLQUFHLENBQUMsQ0FBQztJQUN0QixFQUFDLENBQUM7RUFDSixFQUFDLENBQUM7QUFDSixFQUFDLENBQUM7QUFDRiIsImZpbGUiOiJyb3V0ZVNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCd0cmFjZXVyLXNvdXJjZS1tYXBzJykuaW5zdGFsbChyZXF1aXJlKCd0cmFjZXVyJykpOy8qZ2xvYmFsIGRlc2NyaWJlLCBpdCovXG5sZXQgc3VwZXJhZ2VudCA9IHJlcXVpcmUoJ3N1cGVydGVzdCcpLFxuICAgIF8gPSByZXF1aXJlKCdsb2Rhc2gnKSxcbiAgICBhcHAgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5yZXF1aXJlKCdjaGFpJykuc2hvdWxkKCk7XG5cbmZ1bmN0aW9uIHJlcXVlc3QoKSB7XG4gIHJldHVybiBzdXBlcmFnZW50KGFwcC5zZXJ2ZXIpO1xufVxuXG5kZXNjcmliZSgnUm91dGVzJywgKCkgPT4ge1xuICBkZXNjcmliZSgnR0VUIC8nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gMjAwJywgKGRvbmUpID0+IHtcbiAgICAgIHJlcXVlc3QoKVxuICAgICAgICAuZ2V0KCcvJylcbiAgICAgICAgLmV4cGVjdCgyMDAsIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ0dFVCAvdGhyZWFkJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIDIwMCcsIChkb25lKSA9PiB7XG4gICAgICByZXF1ZXN0KClcbiAgICAgICAgLmdldCgnL3RocmVhZCcpXG4gICAgICAgIC5leHBlY3QoJ0NvbnRlbnQtVHlwZScsIC9qc29uLylcbiAgICAgICAgLmV4cGVjdCgocmVzKSA9PiB7XG4gICAgICAgICAgcmVzLmJvZHkuc2hvdWxkLmJlLmFuKCdhcnJheScpO1xuICAgICAgICAgIGxldCB0aHJlYWQgPSByZXMuYm9keVswXTtcbiAgICAgICAgICB0aHJlYWQuc2hvdWxkLmhhdmUucHJvcGVydHkoJ3RpdGxlJyk7XG4gICAgICAgICAgdGhyZWFkLnNob3VsZC5oYXZlLnByb3BlcnR5KCdhdXRob3InKTtcbiAgICAgICAgICB0aHJlYWQuc2hvdWxkLmhhdmUucHJvcGVydHkoJ3RpdGxlJyk7XG5cbiAgICAgICAgfSlcbiAgICAgICAgLmV4cGVjdCgyMDAsIGRvbmUpO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ0dFVCAvdGhyZWFkLzp0aXRsZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiAyMDAnLCAoZG9uZSkgPT4ge1xuICAgICAgcmVxdWVzdCgpXG4gICAgICAgIC5nZXQoJy90aHJlYWQvSGVsbG8nKVxuICAgICAgICAuZXhwZWN0KCdDb250ZW50LVR5cGUnLCAvanNvbi8pXG4gICAgICAgIC5leHBlY3QoKHJlcykgPT4ge1xuICAgICAgICAgIGxldCB0aHJlYWQgPSByZXMuYm9keTtcblxuICAgICAgICAgIHRocmVhZC50aHJlYWQuc2hvdWxkLmhhdmUucHJvcGVydHkoJ3RpdGxlJyk7XG4gICAgICAgICAgdGhyZWFkLnRocmVhZC5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnYXV0aG9yJyk7XG4gICAgICAgICAgdGhyZWFkLnRocmVhZC5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgndGl0bGUnKTtcblxuICAgICAgICAgIF8uZWFjaCh0aHJlYWQucG9zdHMsIChwb3N0KSA9PiB7XG4gICAgICAgICAgICBwb3N0LnRocmVhZC5zaG91bGQuZXFsKHRocmVhZC50aHJlYWQuX2lkKTtcbiAgICAgICAgICAgIHBvc3Quc2hvdWxkLmhhdmUucHJvcGVydHkoJ3Bvc3QnKTtcbiAgICAgICAgICAgIHBvc3Quc2hvdWxkLmhhdmUucHJvcGVydHkoJ2F1dGhvcicpO1xuICAgICAgICAgICAgcG9zdC5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnZGF0ZScpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoMjAwLCBkb25lKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==